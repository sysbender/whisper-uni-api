FROM ghcr.io/jim60105/whisperx:no_model

WORKDIR /app

# Install Python dependencies for worker (Redis, RQ)
RUN pip install --no-cache-dir \
    redis==5.0.0 \
    rq==1.14.0

# Copy worker application code
COPY worker/ ./worker/

# Create output directories
RUN mkdir -p /tmp/whisperx_output /tmp/timestamped_output

# Run the worker
CMD ["python", "-m", "worker.main"]

